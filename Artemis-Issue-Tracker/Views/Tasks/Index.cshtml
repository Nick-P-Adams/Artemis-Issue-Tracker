@model Artemis_Issue_Tracker.ViewModels.TaskViewModel

@{
    ViewData["Title"] = "Index";
}

<link rel="stylesheet" href="~/css/TabPanel.css" asp-append-version="true" />
<link rel="stylesheet" href="~/css/Roadmap.css" asp-append-version="true" />

<div class="tab-container">
    <div class="tab-bar">
        <button onclick="showPanel(0, '#232323')">Roadmap</button>
        <button onclick="showPanel(1, '#232323')">Backlog</button>
        <button onclick="showPanel(2, '#232323')">Overview</button>
    </div>

    <div class="tab-panel">
        <div class="roadmap-container" id="roadmap-container">
            <div class="date-container" id="date-container"></div>
            <div class="task-container" id="task-container"></div>
        </div>
    </div>

    <div class="tab-panel">
        <div class="backlog">
            <div class="view-header">
                <h1 class="view-title">Backlog</h1>

                <div class="button-container">
                    <a class="button-create" asp-action="Create">
                        <svg class="button-icon" height="20" width="20" viewBox="0 0 20 20">
                            <g>
                                <circle cx="10" cy="10" r="9" stroke-width="2" fill="none" />
                                <line x1="5" y1="10" x2="15" y2="10" stroke-width="2" />
                                <line x1="10" y1="5" x2="10" y2="15" stroke-width="2" />
                            </g>
                        </svg>
                        <p>Create New</p>
                    </a>
                </div>
            </div>

            <div class="filter-container">
                <!-- Need to make this a dynamic search bar in furture sprint-->
                <div class="search-container">
                    <form asp-controller="Tasks" asp-action="Index">
                        <input class="search-field" type="search" name="searchTerm" placeholder="Search Tasks" oninput="document.querySelector('.search-icon').style.display = 'none', document.querySelector('.cancel-icon').style.display = 'initial'" />
                    </form>

                    <div class="search-icon">
                        <span class="bi bi-search" aria-hidden="true" onclick="document.querySelector('.search-field').focus()"></span>
                    </div>

                    <div class="cancel-icon">
                        <span class="bi bi-x" aria-hidden="true" onclick="document.querySelector('.search-icon').style.display = 'initial', document.querySelector('.cancel-icon').style.display = 'none', document.querySelector('.search-field').value = ''"></span>
                    </div>
                </div>

                <div class="select-container">
                    <select aria-label="epic filter">
                        <option selected>Select Epic</option>
                    </select>
                </div>
            </div>

            <div class="sprint-container">
                <divL>

                </divL>
            </div>

            <div class="task-container">
                @if(Model.Epics.Count() > 0) {
                    <div class="epics">
                        <div class="accordion" id="accordionEpics">
                            @foreach(var epic in Model.Epics) {
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_@epic.id" aria-expanded="false" aria-controls="collapse_@epic.id">
                                            @epic.name
                                        </button>
                                    </h2>
                                    @if (epic.sub_tasks.Count() > 0)
                                    {
                                        <div id="collapse_@epic.id" class="accordion-collapse collapse" data-bs-parent="#accordionEpics">
                                            <div class="accordion-body">
                                                <div class="accordion" id="accordionSubTasks">
                                                    @foreach (var task in epic.sub_tasks)
                                                    {
                                                        <div class="accordion-item">
                                                            <h2 class="accordion-header">
                                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                                    TEST @task.name 
                                                                </button>
                                                            </h2>
                                                            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionSubTasks"><div class="accordion-body"><strong>TEST BODY</strong></div></div>
                                                        </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                }

                @if (Model.Stories.Count() > 0)
                {
                    
                }

                @if (Model.Tasks.Count() > 0)
                {
                    
                }

                @if (Model.Bugs.Count() > 0)
                {

                }
            </div>

        </div>
    </div>

    <div class="tab-panel">Tab 3:Content</div>
</div>

<script src="~/js/TabPanel.js" asp-append-version="true"></script>
<script src="~/js/Roadmap.js" asp-append-version="true"></script>
